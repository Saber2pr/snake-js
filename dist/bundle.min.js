var test=function(){"use strict";var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function unwrapExports(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x}function createCommonjsModule(fn,module){return fn(module={exports:{}},module.exports),module.exports}var saberDom=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var TouchFront=function(){function TouchFront(callbackLeft,callbackRight,callbackUp,callbackDown){this.callbackLeft=callbackLeft,this.callbackRight=callbackRight,this.callbackUp=callbackUp,this.callbackDown=callbackDown,this.offset=100,this.delta=200}return TouchFront.prototype.onLeft=function(callbackLeft){return this.callbackLeft=callbackLeft,this},TouchFront.prototype.onRight=function(callbackRight){return this.callbackRight=callbackRight,this},TouchFront.prototype.onUp=function(callbackUp){return this.callbackUp=callbackUp,this},TouchFront.prototype.onDown=function(callbackDown){return this.callbackDown=callbackDown,this},TouchFront.prototype.setProps=function(offset,delta){return void 0===offset&&(offset=100),void 0===delta&&(delta=200),this.offset=offset,this.delta=delta,this},TouchFront.prototype.onStart=function(callback){return this.callbackStart=callback,this},TouchFront.prototype.onUpdate=function(callback){return this.callbackUpdate=callback,this},TouchFront.prototype.onStop=function(callback){return this.callbackStop=callback,this},TouchFront.prototype.listen=function(elememt){var originPos,_this=this;void 0===elememt&&(elememt=document.body);var state,lock=0;elememt.addEventListener("mouseenter",function(){state="enter"}),elememt.addEventListener("mousedown",function(event){originPos=event,(state="enter")===state&&_this.callbackStart&&_this.callbackStart(event)}),elememt.addEventListener("mousemove",function(event){lock++,"enter"===state&&Boolean(originPos)&&_this.callbackUpdate&&_this.callbackUpdate(event)}),elememt.addEventListener("mouseup",function(event){lock<_this.delta&&_this.testPos(originPos,event,event),lock=0,"enter"===state&&_this.callbackStop&&_this.callbackStop(event),originPos=state=null}),elememt.addEventListener("mouseout",function(){state=null})},TouchFront.prototype.testPos=function(originPos,touchPos,event){Math.abs(touchPos.x-originPos.x)<this.offset&&Math.abs(touchPos.y-originPos.y)<this.offset||(Math.abs(touchPos.x-originPos.x)>Math.abs(touchPos.y-originPos.y)?touchPos.x-originPos.x>this.offset?this.callbackRight&&this.callbackRight(event):touchPos.x-originPos.x<-this.offset&&this.callbackLeft&&this.callbackLeft(event):touchPos.y-originPos.y>this.offset?this.callbackDown&&this.callbackDown(event):touchPos.y-originPos.y<-this.offset&&this.callbackUp&&this.callbackUp(event))},TouchFront}();exports.TouchFront=TouchFront});unwrapExports(saberDom);saberDom.TouchFront;var lib=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(saberDom)});unwrapExports(lib);var saberInterval=createCommonjsModule(function(module,exports){function schedule(update,frameProps){var before=Date.now(),delta={value:frameProps?frameProps.delta:17},cancel={value:!!frameProps&&frameProps.cancel},delayCancel={value:frameProps?frameProps.delayCancel:-1},frames_value=frameProps?frameProps.frames:-1,counter=0,frame=function(){if(Date.now()-before>delta.value){if(cancel.value)return;if(0<frames_value&&frames_value<=counter)return;before=Date.now(),update(delta.value),counter++}requestAnimationFrame(frame)};return requestAnimationFrame(frame),0<delayCancel.value&&setTimeout(function(){return cancel.value=!0},delayCancel.value),function(){return cancel.value=!0}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.call=function(func,times){void 0===times&&(times=1);var result,count=0,loop=function(){return times<=count||(result=func(++count),loop()),result};return loop()},exports.schedule=schedule,exports.scheduleOnce=function(update,delay){return schedule(update,{delta:delay,frames:1})}});unwrapExports(saberInterval);saberInterval.call,saberInterval.schedule,saberInterval.scheduleOnce;var lib$1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(saberInterval)});unwrapExports(lib$1);var saberList=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var List=function(){function List(instance){this.instance=instance}return Object.defineProperty(List.prototype,"foot",{get:function(){for(var current=this;current.next;)current=current.next;return current},enumerable:!0,configurable:!0}),List.prototype.set=function(key){var _this=this;return function(value){return _this[key]=value,_this}},List.link=function(){for(var instances=[],_i=0;_i<arguments.length;_i++)instances[_i]=arguments[_i];return instances.reduceRight(function(next,instance){return new List(instance).set("next")(next)},null)},List.prototype.toArray=function(){var result=[];return this.forEach(function(value){return result.push(value)}),result},List.prototype.forEach=function(callbackfn,thisArg){for(var current=this,index=0;current;)callbackfn.call(thisArg,current.instance,index,this),current=current.next,index++},List.prototype.reverse=function(){var result=new List(null);result.next=this;for(var pre=result.next,current=pre.next;current;)pre.next=current.next,current.next=result.next,result.next=current,current=pre.next;return result.next},List}();exports.List=List});unwrapExports(saberList);saberList.List;var fiber=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var Fiber=function(instance){var _this=this;this.instance=instance,this.set=function(key){return function(value){return _this[key]=value,_this}}};exports.Fiber=Fiber,exports.link=function(fiber){return fiber.instance.children&&fiber.set("child")(fiber.instance.children.reduceRight(function(sibling,instance){return new Fiber(instance).set("parent")(fiber).set("sibling")(sibling)},null)).child},exports.walk=function(fiber){fiber.child||exports.link(fiber);var current=fiber;if(current.child)return current.child;if(current.sibling)return current.sibling;if(!current.parent)return current;for(;!current.parent.sibling;)if(!(current=current.parent).parent)return null;return current.parent.sibling},exports.walkAll=function(component,cat){for(var current=new Fiber(component);current;)cat(current.instance),current=exports.walk(current)}});unwrapExports(fiber);fiber.Fiber,fiber.link,fiber.walk,fiber.walkAll;var lib$2=createCommonjsModule(function(module,exports){function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(saberList),__export(fiber)});unwrapExports(lib$2);var saberCanvas=createCommonjsModule(function(module,exports){var Rules;Object.defineProperty(exports,"__esModule",{value:!0}),function(Rules){Rules.isLabel=function(obj){return"Label"===obj.type},Rules.isLabelPropsArray=function(obj){return Rules.isLabel(obj[0])},Rules.isNode=function(obj){return"Node"===obj.type},Rules.isNodePropsArray=function(obj){return Rules.isNode(obj[0])},Rules.isSprite=function(obj){return"Sprite"===obj.type},Rules.isSpritePropsArray=function(obj){return Rules.isSprite(obj[0])},Rules.isCanvas=function(obj){return void 0!==obj.getContext},Rules.isCtx=function(obj){return void 0!==obj.canvas}}(Rules=exports.Rules||(exports.Rules={}));var Canvas=function(){function Canvas(config,MaxWidth,MaxHeight){var _this=this,ctor=function(elementId,MaxWidth,MaxHeight){var canvas=document.getElementById(elementId);if(!canvas)throw"cannot get canvas element by id: "+elementId;if(Rules.isCanvas(canvas)){canvas.width=MaxWidth,canvas.height=MaxHeight;var ctx=canvas.getContext("2d");Rules.isCtx(ctx)&&(_this.ctx=ctx)}};"object"==typeof config?ctor(config.elementId,config.MaxWidth,config.MaxHeight):ctor(config,MaxWidth,MaxHeight)}return Canvas.prototype.clear=function(rect){if(rect){var x=rect.x,y=rect.y,width=rect.width,height=rect.height;return this.ctx.clearRect(x,y,width,height),this}return this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this},Canvas.prototype.fillNode=function(props){var x=props.x,y=props.y,width=props.width,height=props.height,color=props.color;this.ctx.fillStyle=color,this.ctx.fillRect(x,y,width,height)},Canvas.prototype.fillLabel=function(props){var x=props.x,y=props.y,height=props.height,color=props.color,fontSize=props.fontSize,fontStyle=props.fontStyle,text=props.text;this.ctx.font=String(fontSize)+"px "+fontStyle,this.ctx.strokeStyle=color,this.ctx.strokeText(text,x,y+height)},Canvas.prototype.fillImage=function(props){var _this=this,x=props.x,y=props.y,width=props.width,height=props.height,img=props.img;img.onloadend=function(){return _this.ctx.drawImage(img,x,y,width,height)}},Canvas.prototype.getImageData=function(sx,sy,sw,sh){return this.ctx.getImageData(sx,sy,sw,sh)},Canvas.prototype.draw=function(){for(var _this=this,node=[],_i=0;_i<arguments.length;_i++)node[_i]=arguments[_i];return 0<node.length&&(Rules.isLabelPropsArray(node)?node.forEach(function(l){return _this.fillLabel(l)}):Rules.isNodePropsArray(node)?node.forEach(function(n){return _this.fillNode(n)}):Rules.isSpritePropsArray(node)&&node.forEach(function(s){return _this.fillImage(s)})),this},Canvas}();exports.Canvas=Canvas});unwrapExports(saberCanvas);saberCanvas.Rules,saberCanvas.Canvas;var saberVector=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.negative=function(value){return 0===value?0:-1*value},exports.square=function(value){return Math.pow(value,2)},exports.magnitude2d=function(x,y){return Math.sqrt(exports.square(x)+exports.square(y))},exports.magnitude3d=function(x,y,z){return Math.sqrt(exports.square(x)+exports.square(y)+exports.square(z))},exports.angleToRad=function(angle){return angle*Math.PI/180},exports.radToAngle=function(rad){return 180*rad/Math.PI};var Vec2=function(){function Vec2(x,y){var _this=this;this.x=x,this.y=y,this.props=function(){return{x:_this.x,y:_this.y}}}return Vec2.prototype.equals=function(v2){return v2.x===this.x&&v2.y===this.y},Vec2.prototype.add=function(vector){return new Vec2(this.x+vector.x,this.y+vector.y)},Vec2.prototype.sub=function(vector){return new Vec2(this.x-vector.x,this.y-vector.y)},Vec2.prototype.mul=function(vector){return new Vec2(this.x*vector.x,this.y*vector.y)},Vec2.prototype.scale=function(value){return this.mul(new Vec2(value,value))},Vec2.prototype.div=function(vector){return new Vec2(this.x/vector.x,this.y/vector.y)},Vec2.prototype.neg=function(){return new Vec2(exports.negative(this.x),exports.negative(this.y))},Vec2.prototype.mag=function(){return exports.magnitude2d(this.x,this.y)},Vec2.prototype.angleWith=function(vector){return Math.acos(this.dot(vector)/(this.mag()*vector.mag()))},Vec2.prototype.dot=function(vector){return this.x*vector.x+this.y*vector.y},Vec2.prototype.cross=function(vector){return new Vec3(0,0,this.x*vector.y-this.y*vector.x)},Vec2.prototype.unitized=function(){return new Vec2(this.x/this.mag(),this.y/this.mag())},Vec2}();exports.Vec2=Vec2,exports.v2=function(x,y){return"object"==typeof x?new Vec2(x.x,x.y):new Vec2(x,y||x)};var Vec3=function(){function Vec3(x,y,z){var _this=this;this.x=x,this.y=y,this.z=z,this.props=function(){return{x:_this.x,y:_this.y,z:_this.z}}}return Vec3.prototype.equals=function(v3){return this.x===v3.x&&this.y===v3.y&&this.z===v3.z},Vec3.prototype.add=function(vector3d){return new Vec3(this.x+vector3d.x,this.y+vector3d.y,this.z+vector3d.z)},Vec3.prototype.sub=function(vector3d){return new Vec3(this.x-vector3d.x,this.y-vector3d.y,this.z-vector3d.z)},Vec3.prototype.mul=function(vector){return new Vec3(this.x*vector.x,this.y*vector.y,this.z*vector.z)},Vec3.prototype.scale=function(value){return this.mul(new Vec3(value,value,value))},Vec3.prototype.div=function(vector){return new Vec3(this.x/vector.x,this.y/vector.y,this.z/vector.z)},Vec3.prototype.neg=function(){return new Vec3(exports.negative(this.x),exports.negative(this.y),exports.negative(this.z))},Vec3.prototype.mag=function(){return exports.magnitude3d(this.x,this.y,this.z)},Vec3.prototype.angleWith=function(vector){return Math.acos(this.dot(vector)/(this.mag()*vector.mag()))},Vec3.prototype.dot=function(vector){return this.x*vector.x+this.y*vector.y+this.z*vector.z},Vec3.prototype.cross=function(vector){return new Vec3(this.y*vector.z-this.z*vector.y,this.z*vector.x-this.x*vector.z,this.x*vector.y-this.y*vector.x)},Vec3.prototype.unitized=function(){return new Vec3(this.x/this.mag(),this.y/this.mag(),this.z/this.mag())},Vec3}();exports.Vec3=Vec3;var Line2D=function(){function Line2D(start,end){this.start=start,this.end=end}return Line2D.prototype.projection=function(line){var angle=this.toVec().angleWith(line.toVec()),length=this.toVec().mag()*Math.cos(angle),unit=line.toVec().unitized();return new Line2D(line.start,unit.scale(length))},Line2D.prototype.toVec=function(){return this.end.sub(this.start)},Line2D}();exports.Line2D=Line2D;var Line3D=function(){function Line3D(start,end){this.start=start,this.end=end}return Line3D.prototype.projection=function(line){var angle=this.toVec().angleWith(line.toVec()),length=this.toVec().mag()*Math.cos(angle),unit=line.toVec().unitized();return new Line3D(line.start,unit.scale(length))},Line3D.prototype.toVec=function(){return this.end.sub(this.start)},Line3D}();exports.Line3D=Line3D});unwrapExports(saberVector);saberVector.negative,saberVector.square,saberVector.magnitude2d,saberVector.magnitude3d,saberVector.angleToRad,saberVector.radToAngle,saberVector.Vec2,saberVector.v2,saberVector.Vec3,saberVector.Line2D,saberVector.Line3D;var lib$3=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(saberVector)});unwrapExports(lib$3);var size=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var Size=function(width,height){this.width=width,this.height=height};exports.Size=Size});unwrapExports(size);size.Size;var Rect_1=createCommonjsModule(function(module,exports){var extendStatics,__extends=commonjsGlobal&&commonjsGlobal.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});Object.defineProperty(exports,"__esModule",{value:!0});var Rect=function(){function Rect(w,h){this.x=0,this.y=0,this.width=w,this.height=h,this.type="Rect"}return Rect.prototype.setPosition=function(newPosOrX,y){return"number"==typeof newPosOrX?(this.x=newPosOrX,this.y=void 0===y?newPosOrX:y):(this.x=newPosOrX.x,this.y=newPosOrX.y),this},Rect.prototype.getPosition=function(){return lib$3.v2(this.x,this.y)},Rect.prototype.setSize=function(w,h){return this.width=w,this.height=h,this},Rect.prototype.getContentSize=function(){return new size.Size(this.width,this.height)},Rect}(),Node=function(_super){function Node(w,h){var _this=_super.call(this,w,h)||this;return _this.color="#3a32af",_this.type="Node",_this}return __extends(Node,_super),Node.prototype.setColor=function(color){return this.color=color,this},Node}(exports.Rect=Rect),Label=function(_super){function Label(text,fontSize){void 0===fontSize&&(fontSize=23);var _this=_super.call(this,text.length*fontSize,fontSize)||this;return _this.fontStyle="serif",_this.color="563a6d",_this.text=text,_this.fontSize=fontSize,_this.type="Label",_this}return __extends(Label,_super),Label.prototype.setFontSize=function(fontSize){return this.fontSize=fontSize,this.setSize(this.text.length*fontSize,fontSize),this},Label.prototype.setFontStyle=function(fontStyle){return this.fontStyle=fontStyle,this},Label.prototype.setText=function(text){return this.text=text,this},Label}(exports.Node=Node);exports.Label=Label;var Sprite=function(_super){function Sprite(url){var _this=_super.call(this,0,0)||this;return _this.type="Sprite",_this.img=new Image,_this.img.src=url,_this.setSize(_this.img.width,_this.img.height),_this}return __extends(Sprite,_super),Sprite.prototype.setSrc=function(url){return this.img.src=url,this},Sprite}(Rect);exports.Sprite=Sprite});unwrapExports(Rect_1);Rect_1.Rect,Rect_1.Node,Rect_1.Label,Rect_1.Sprite;var Reflect$1,lib$4=createCommonjsModule(function(module,exports){function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(saberCanvas),__export(Rect_1),__export(size),__export(lib$3)});unwrapExports(lib$4),function(Reflect){!function(factory){var root="object"==typeof commonjsGlobal?commonjsGlobal:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),exporter=makeExporter(Reflect);function makeExporter(target,previous){return function(key,value){"function"!=typeof target[key]&&Object.defineProperty(target,key,{configurable:!0,writable:!0,value:value}),previous&&previous(key,value)}}void 0===root.Reflect?root.Reflect=Reflect:exporter=makeExporter(root.Reflect,exporter),function(exporter){var hasOwn=Object.prototype.hasOwnProperty,supportsSymbol="function"==typeof Symbol,toPrimitiveSymbol=supportsSymbol&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",iteratorSymbol=supportsSymbol&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",supportsCreate="function"==typeof Object.create,supportsProto={__proto__:[]}instanceof Array,downLevel=!supportsCreate&&!supportsProto,HashMap={create:supportsCreate?function(){return MakeDictionary(Object.create(null))}:supportsProto?function(){return MakeDictionary({__proto__:null})}:function(){return MakeDictionary({})},has:downLevel?function(map,key){return hasOwn.call(map,key)}:function(map,key){return key in map},get:downLevel?function(map,key){return hasOwn.call(map,key)?map[key]:void 0}:function(map,key){return map[key]}},functionPrototype=Object.getPrototypeOf(Function),usePolyfill="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,_Map=usePolyfill||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var cacheSentinel={},arraySentinel=[],MapIterator=function(){function MapIterator(keys,values,selector){this._index=0,this._keys=keys,this._values=values,this._selector=selector}return MapIterator.prototype["@@iterator"]=function(){return this},MapIterator.prototype[iteratorSymbol]=function(){return this},MapIterator.prototype.next=function(){var index=this._index;if(0<=index&&index<this._keys.length){var result=this._selector(this._keys[index],this._values[index]);return index+1>=this._keys.length?(this._index=-1,this._keys=arraySentinel,this._values=arraySentinel):this._index++,{value:result,done:!1}}return{value:void 0,done:!0}},MapIterator.prototype.throw=function(error){throw 0<=this._index&&(this._index=-1,this._keys=arraySentinel,this._values=arraySentinel),error},MapIterator.prototype.return=function(value){return 0<=this._index&&(this._index=-1,this._keys=arraySentinel,this._values=arraySentinel),{value:value,done:!0}},MapIterator}();return function(){function Map(){this._keys=[],this._values=[],this._cacheKey=cacheSentinel,this._cacheIndex=-2}return Object.defineProperty(Map.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Map.prototype.has=function(key){return 0<=this._find(key,!1)},Map.prototype.get=function(key){var index=this._find(key,!1);return 0<=index?this._values[index]:void 0},Map.prototype.set=function(key,value){var index=this._find(key,!0);return this._values[index]=value,this},Map.prototype.delete=function(key){var index=this._find(key,!1);if(0<=index){for(var size=this._keys.length,i=index+1;i<size;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,key===this._cacheKey&&(this._cacheKey=cacheSentinel,this._cacheIndex=-2),!0}return!1},Map.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=cacheSentinel,this._cacheIndex=-2},Map.prototype.keys=function(){return new MapIterator(this._keys,this._values,getKey)},Map.prototype.values=function(){return new MapIterator(this._keys,this._values,getValue)},Map.prototype.entries=function(){return new MapIterator(this._keys,this._values,getEntry)},Map.prototype["@@iterator"]=function(){return this.entries()},Map.prototype[iteratorSymbol]=function(){return this.entries()},Map.prototype._find=function(key,insert){return this._cacheKey!==key&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=key)),this._cacheIndex<0&&insert&&(this._cacheIndex=this._keys.length,this._keys.push(key),this._values.push(void 0)),this._cacheIndex},Map}();function getKey(key,_){return key}function getValue(_,value){return value}function getEntry(key,value){return[key,value]}}():Map,_Set=usePolyfill||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function Set(){this._map=new _Map}return Object.defineProperty(Set.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Set.prototype.has=function(value){return this._map.has(value)},Set.prototype.add=function(value){return this._map.set(value,value),this},Set.prototype.delete=function(value){return this._map.delete(value)},Set.prototype.clear=function(){this._map.clear()},Set.prototype.keys=function(){return this._map.keys()},Set.prototype.values=function(){return this._map.values()},Set.prototype.entries=function(){return this._map.entries()},Set.prototype["@@iterator"]=function(){return this.keys()},Set.prototype[iteratorSymbol]=function(){return this.keys()},Set}():Set,Metadata=new(usePolyfill||"function"!=typeof WeakMap?function(){var UUID_SIZE=16,keys=HashMap.create(),rootKey=CreateUniqueKey();return function(){function WeakMap(){this._key=CreateUniqueKey()}return WeakMap.prototype.has=function(target){var table=GetOrCreateWeakMapTable(target,!1);return void 0!==table&&HashMap.has(table,this._key)},WeakMap.prototype.get=function(target){var table=GetOrCreateWeakMapTable(target,!1);return void 0!==table?HashMap.get(table,this._key):void 0},WeakMap.prototype.set=function(target,value){var table=GetOrCreateWeakMapTable(target,!0);return table[this._key]=value,this},WeakMap.prototype.delete=function(target){var table=GetOrCreateWeakMapTable(target,!1);return void 0!==table&&delete table[this._key]},WeakMap.prototype.clear=function(){this._key=CreateUniqueKey()},WeakMap}();function CreateUniqueKey(){for(var key;key="@@WeakMap@@"+CreateUUID(),HashMap.has(keys,key););return keys[key]=!0,key}function GetOrCreateWeakMapTable(target,create){if(!hasOwn.call(target,rootKey)){if(!create)return;Object.defineProperty(target,rootKey,{value:HashMap.create()})}return target[rootKey]}function FillRandomBytes(buffer,size){for(var i=0;i<size;++i)buffer[i]=255*Math.random()|0;return buffer}function CreateUUID(){var size,data=(size=UUID_SIZE,"function"!=typeof Uint8Array?FillRandomBytes(new Array(size),size):"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(size)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(size)):FillRandomBytes(new Uint8Array(size),size));data[6]=79&data[6]|64,data[8]=191&data[8]|128;for(var result="",offset=0;offset<UUID_SIZE;++offset){var byte=data[offset];4!==offset&&6!==offset&&8!==offset||(result+="-"),byte<16&&(result+="0"),result+=byte.toString(16).toLowerCase()}return result}}():WeakMap);function DecorateConstructor(decorators,target){for(var i=decorators.length-1;0<=i;--i){var decorator=decorators[i],decorated=decorator(target);if(!IsUndefined(decorated)&&!IsNull(decorated)){if(!IsConstructor(decorated))throw new TypeError;target=decorated}}return target}function DecorateProperty(decorators,target,propertyKey,descriptor){for(var i=decorators.length-1;0<=i;--i){var decorator=decorators[i],decorated=decorator(target,propertyKey,descriptor);if(!IsUndefined(decorated)&&!IsNull(decorated)){if(!IsObject(decorated))throw new TypeError;descriptor=decorated}}return descriptor}function GetOrCreateMetadataMap(O,P,Create){var targetMetadata=Metadata.get(O);if(IsUndefined(targetMetadata)){if(!Create)return;targetMetadata=new _Map,Metadata.set(O,targetMetadata)}var metadataMap=targetMetadata.get(P);if(IsUndefined(metadataMap)){if(!Create)return;metadataMap=new _Map,targetMetadata.set(P,metadataMap)}return metadataMap}function OrdinaryHasMetadata(MetadataKey,O,P){var hasOwn=OrdinaryHasOwnMetadata(MetadataKey,O,P);if(hasOwn)return!0;var parent=OrdinaryGetPrototypeOf(O);return!IsNull(parent)&&OrdinaryHasMetadata(MetadataKey,parent,P)}function OrdinaryHasOwnMetadata(MetadataKey,O,P){var metadataMap=GetOrCreateMetadataMap(O,P,!1);return!IsUndefined(metadataMap)&&!!metadataMap.has(MetadataKey)}function OrdinaryGetMetadata(MetadataKey,O,P){var hasOwn=OrdinaryHasOwnMetadata(MetadataKey,O,P);if(hasOwn)return OrdinaryGetOwnMetadata(MetadataKey,O,P);var parent=OrdinaryGetPrototypeOf(O);return IsNull(parent)?void 0:OrdinaryGetMetadata(MetadataKey,parent,P)}function OrdinaryGetOwnMetadata(MetadataKey,O,P){var metadataMap=GetOrCreateMetadataMap(O,P,!1);if(!IsUndefined(metadataMap))return metadataMap.get(MetadataKey)}function OrdinaryDefineOwnMetadata(MetadataKey,MetadataValue,O,P){var metadataMap=GetOrCreateMetadataMap(O,P,!0);metadataMap.set(MetadataKey,MetadataValue)}function OrdinaryMetadataKeys(O,P){var ownKeys=OrdinaryOwnMetadataKeys(O,P),parent=OrdinaryGetPrototypeOf(O);if(null===parent)return ownKeys;var parentKeys=OrdinaryMetadataKeys(parent,P);if(parentKeys.length<=0)return ownKeys;if(ownKeys.length<=0)return parentKeys;for(var set=new _Set,keys=[],_i=0,ownKeys_1=ownKeys;_i<ownKeys_1.length;_i++){var key=ownKeys_1[_i],hasKey=set.has(key);hasKey||(set.add(key),keys.push(key))}for(var _a=0,parentKeys_1=parentKeys;_a<parentKeys_1.length;_a++){var key=parentKeys_1[_a],hasKey=set.has(key);hasKey||(set.add(key),keys.push(key))}return keys}function OrdinaryOwnMetadataKeys(O,P){var keys=[],metadataMap=GetOrCreateMetadataMap(O,P,!1);if(IsUndefined(metadataMap))return keys;for(var keysObj=metadataMap.keys(),iterator=function(obj){var method=GetMethod(obj,iteratorSymbol);if(!IsCallable(method))throw new TypeError;var iterator=method.call(obj);if(!IsObject(iterator))throw new TypeError;return iterator}(keysObj),k=0;;){var next=IteratorStep(iterator);if(!next)return keys.length=k,keys;var nextValue=next.value;try{keys[k]=nextValue}catch(e){try{IteratorClose(iterator)}finally{throw e}}k++}}function Type(x){if(null===x)return 1;switch(typeof x){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===x?1:6;default:return 6}}function IsUndefined(x){return void 0===x}function IsNull(x){return null===x}function IsObject(x){return"object"==typeof x?null!==x:"function"==typeof x}function ToPrimitive(input,PreferredType){switch(Type(input)){case 0:case 1:case 2:case 3:case 4:case 5:return input}var hint=3===PreferredType?"string":5===PreferredType?"number":"default",exoticToPrim=GetMethod(input,toPrimitiveSymbol);if(void 0===exoticToPrim)return function(O,hint){if("string"===hint){var toString_1=O.toString;if(IsCallable(toString_1)){var result=toString_1.call(O);if(!IsObject(result))return result}var valueOf=O.valueOf;if(IsCallable(valueOf)){var result=valueOf.call(O);if(!IsObject(result))return result}}else{var valueOf=O.valueOf;if(IsCallable(valueOf)){var result=valueOf.call(O);if(!IsObject(result))return result}var toString_2=O.toString;if(IsCallable(toString_2)){var result=toString_2.call(O);if(!IsObject(result))return result}}throw new TypeError}(input,"default"===hint?"number":hint);var result=exoticToPrim.call(input,hint);if(IsObject(result))throw new TypeError;return result}function ToPropertyKey(argument){var key=ToPrimitive(argument,3);return"symbol"==typeof key?key:function(argument){return""+argument}(key)}function IsArray(argument){return Array.isArray?Array.isArray(argument):argument instanceof Object?argument instanceof Array:"[object Array]"===Object.prototype.toString.call(argument)}function IsCallable(argument){return"function"==typeof argument}function IsConstructor(argument){return"function"==typeof argument}function IsPropertyKey(argument){switch(Type(argument)){case 3:case 4:return!0;default:return!1}}function GetMethod(V,P){var func=V[P];if(null!=func){if(!IsCallable(func))throw new TypeError;return func}}function IteratorStep(iterator){var result=iterator.next();return!result.done&&result}function IteratorClose(iterator){var f=iterator.return;f&&f.call(iterator)}function OrdinaryGetPrototypeOf(O){var proto=Object.getPrototypeOf(O);if("function"!=typeof O||O===functionPrototype)return proto;if(proto!==functionPrototype)return proto;var prototype=O.prototype,prototypeProto=prototype&&Object.getPrototypeOf(prototype);if(null==prototypeProto||prototypeProto===Object.prototype)return proto;var constructor=prototypeProto.constructor;return"function"!=typeof constructor?proto:constructor===O?proto:constructor}function MakeDictionary(obj){return obj.__=void 0,delete obj.__,obj}exporter("decorate",function(decorators,target,propertyKey,attributes){{if(IsUndefined(propertyKey)){if(!IsArray(decorators))throw new TypeError;if(!IsConstructor(target))throw new TypeError;return DecorateConstructor(decorators,target)}if(!IsArray(decorators))throw new TypeError;if(!IsObject(target))throw new TypeError;if(!IsObject(attributes)&&!IsUndefined(attributes)&&!IsNull(attributes))throw new TypeError;return IsNull(attributes)&&(attributes=void 0),propertyKey=ToPropertyKey(propertyKey),DecorateProperty(decorators,target,propertyKey,attributes)}}),exporter("metadata",function(metadataKey,metadataValue){function decorator(target,propertyKey){if(!IsObject(target))throw new TypeError;if(!IsUndefined(propertyKey)&&!IsPropertyKey(propertyKey))throw new TypeError;OrdinaryDefineOwnMetadata(metadataKey,metadataValue,target,propertyKey)}return decorator}),exporter("defineMetadata",function(metadataKey,metadataValue,target,propertyKey){if(!IsObject(target))throw new TypeError;IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey));return OrdinaryDefineOwnMetadata(metadataKey,metadataValue,target,propertyKey)}),exporter("hasMetadata",function(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey));return OrdinaryHasMetadata(metadataKey,target,propertyKey)}),exporter("hasOwnMetadata",function(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey));return OrdinaryHasOwnMetadata(metadataKey,target,propertyKey)}),exporter("getMetadata",function(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey));return OrdinaryGetMetadata(metadataKey,target,propertyKey)}),exporter("getOwnMetadata",function(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey));return OrdinaryGetOwnMetadata(metadataKey,target,propertyKey)}),exporter("getMetadataKeys",function(target,propertyKey){if(!IsObject(target))throw new TypeError;IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey));return OrdinaryMetadataKeys(target,propertyKey)}),exporter("getOwnMetadataKeys",function(target,propertyKey){if(!IsObject(target))throw new TypeError;IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey));return OrdinaryOwnMetadataKeys(target,propertyKey)}),exporter("deleteMetadata",function(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey));var metadataMap=GetOrCreateMetadataMap(target,propertyKey,!1);if(IsUndefined(metadataMap))return!1;if(!metadataMap.delete(metadataKey))return!1;if(0<metadataMap.size)return!0;var targetMetadata=Metadata.get(target);return targetMetadata.delete(propertyKey),0<targetMetadata.size||Metadata.delete(target),!0})}(exporter)}()}(Reflect$1||(Reflect$1={}));var saberIoc=createCommonjsModule(function(module,exports){var __decorate=commonjsGlobal&&commonjsGlobal.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(c<3?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r},__metadata=commonjsGlobal&&commonjsGlobal.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0});var Class,MetaStore={},BASETYPES=["Number","String","Boolean","undefined","Array"],MetaKey=function(id){return"saber_meta:"+id};function ParamCheck(constructor,methodName){var origin=Reflect.get(constructor,methodName);return Reflect.set(constructor,methodName,function(){for(var params=[],_i=0;_i<arguments.length;_i++)params[_i]=arguments[_i];var constructor$=params[0];return Class.isStatic(constructor$)?constructor$:(function(constructor$){if(BASETYPES.includes(Reflect.get(constructor$,"name")))throw new Error("the param of class["+Reflect.getMetadata("saber_visited",MetaStore)+"]'s constructor has invalid type: "+constructor$.name);Reflect.defineMetadata("saber_visited",constructor$.name,MetaStore)}(constructor$),origin.apply(constructor,params))}),origin}exports.Injectable=function(id){return function(target){if(Reflect.hasMetadata(MetaKey(id),MetaStore))throw new Error("id:["+id+"] is existed!");Reflect.defineMetadata(MetaKey(id||Reflect.get(target,"name")),target,MetaStore)}},exports.Inject=function(id){return function(target,key,index){return Reflect.defineMetadata(MetaKey(id),index,target)}},exports.Bootstrap=function(target){Reflect.defineMetadata("saber_main",void 0,target)},exports.Singleton=function(target){Reflect.defineMetadata("saber_static",void 0,target)},exports.Static=function(target){Reflect.defineMetadata("saber_static",void 0,target)},function(Class){Class.isStatic=function(target){return Reflect.hasMetadata("saber_static",target)}}(Class||(Class={})),function(SaIOC){var Factory=function(){function Factory(){}var _a;return Factory.create=function(constructor){var _this=this,dependenciesMeta=[];Reflect.hasMetadata("design:paramtypes",constructor)&&Reflect.getMetadata("design:paramtypes",constructor).forEach(function(value,index){"Object"!==Reflect.get(value,"name")&&(dependenciesMeta[index]=value)}),Reflect.getMetadataKeys(constructor).filter(function(key){return-1!==key.indexOf("saber_meta")}).forEach(function(key){if(!Reflect.hasMetadata(key,MetaStore))throw new Error("cannot found "+key.replace("saber_meta","dependence")+" in container.");var index=Reflect.getMetadata(key,constructor),meta=Reflect.getMetadata(key,MetaStore);dependenciesMeta[index]=meta});var depInstances=dependenciesMeta.map(function(dependence){return _this.create(dependence)});return new(constructor.bind.apply(constructor,[void 0].concat(depInstances)))},__decorate([ParamCheck,__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype","function"==typeof(_a="undefined"!=typeof T&&T)?_a:Object)],Factory,"create",null),Factory}();function BootStrap(constructor,mainMethod){var main=Factory.create(constructor);Reflect.has(constructor.prototype,"main")?Reflect.get(constructor.prototype,"main").apply(main):Reflect.get(constructor.prototype,mainMethod||Reflect.ownKeys(constructor.prototype)[1]).apply(main)}SaIOC.Factory=Factory,SaIOC.BootStrap=BootStrap;var Container=function(){function Container(){for(var Constructors=[],_i=0;_i<arguments.length;_i++)Constructors[_i]=arguments[_i];this.main=Constructors.find(function(constructor){return Reflect.hasMetadata("saber_main",constructor)})||Constructors[0]}return Container.prototype.pull=function(){return Factory.create(this.main)},Container.prototype.run=function(Constructor){BootStrap(Constructor||this.main)},Container}();SaIOC.Container=Container}(exports.SaIOC||(exports.SaIOC={}))});unwrapExports(saberIoc);saberIoc.Injectable,saberIoc.Inject,saberIoc.Bootstrap,saberIoc.Singleton,saberIoc.Static,saberIoc.SaIOC;var lib$5=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(saberIoc)});unwrapExports(lib$5);var Modules=createCommonjsModule(function(module,exports){var __importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result};Object.defineProperty(exports,"__esModule",{value:!0});var Mods=__importStar(lib$4);exports.Modules=Object.keys(Mods).map(function(m){return Mods[m].name&&Mods[m]}).filter(function(m){return m}),exports.registerModule=function(){for(var modules=[],_i=0;_i<arguments.length;_i++)modules[_i]=arguments[_i];return exports.Modules.push.apply(exports.Modules,modules)}});unwrapExports(Modules);Modules.Modules,Modules.registerModule;var createCanvas=createCommonjsModule(function(module,exports){var __importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result};Object.defineProperty(exports,"__esModule",{value:!0});var Canvas,sc=__importStar(lib$4);exports.createCanvas=function(config){return function(){for(var _a,Constructors=[],_i=0;_i<arguments.length;_i++)Constructors[_i]=arguments[_i];Canvas=new sc.Canvas(config),Modules.Modules.forEach(function(mod){return lib$5.Injectable()(mod)});var Root=(new((_a=lib$5.SaIOC.Container).bind.apply(_a,[void 0].concat(Constructors)))).pull();lib$1.schedule(function(Root){return function(dt){Canvas.clear(),lib$2.walkAll(Root,function(component){component.node&&Canvas.draw(component.node),component.update&&component.update(dt)})}}(Root),{delta:1e3/(config.fps||60)})}}});unwrapExports(createCanvas);createCanvas.createCanvas;var lib$6=createCommonjsModule(function(module,exports){function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(createCanvas),__export(Modules),__export(lib$4),__export(lib$1),__export(lib$5)});unwrapExports(lib$6);var props=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.config={elementId:"root",MaxWidth:500,MaxHeight:500,bodySize:50,colors:{food:"yellow",body:"green",background:"blue",head:"red"},fps:1}});unwrapExports(props);props.config;var _Symbol=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),function(InjSym){InjSym.Factory="Factory",InjSym.Rander="Rander",InjSym.Scene="Scene",InjSym.Snake="Snake",InjSym.Node="Node",InjSym.TouchFront="TouchFront",InjSym.Label="Label"}(exports.InjSym||(exports.InjSym={}))});unwrapExports(_Symbol);_Symbol.InjSym;var Snake_1=createCommonjsModule(function(module,exports){var __decorate=commonjsGlobal&&commonjsGlobal.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(c<3?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r},__metadata=commonjsGlobal&&commonjsGlobal.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__param=commonjsGlobal&&commonjsGlobal.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};Object.defineProperty(exports,"__esModule",{value:!0});var Snake=function(){function Snake(node,Factory){this.node=node,this.Factory=Factory;var bodySize=props.config.bodySize,body=props.config.colors.body,head=this.Factory.getInstance().createListNode(new lib$6.Node(bodySize,bodySize).setColor(body).setPosition(50,0));this.foot=this.Factory.getInstance().createListNode(this.node.setSize(bodySize,bodySize).setColor(body)).set("next")(head),this.children=[this.Factory.getInstance().createComponent(head.instance),this.Factory.getInstance().createComponent(this.foot.instance)],this.step=bodySize}return Object.defineProperty(Snake.prototype,"head",{get:function(){for(var current=this.foot;current.next;)current=current.next;return current},enumerable:!0,configurable:!0}),Object.defineProperty(Snake.prototype,"length",{get:function(){for(var index=1,current=this.foot;current.next;)current=current.next,index++;return index},enumerable:!0,configurable:!0}),Snake.prototype.move=function(front){for(var current=this.foot;current.next;){var prePos=current.next.instance.getPosition();current.instance.setPosition(prePos),current=current.next}return current.instance.setPosition(this.getNextPos(front)),this},Snake.prototype.eat=function(food){this.head.next=new lib$2.List(food)},Snake.prototype.meet=function(target){return this.head.instance.getPosition().equals(target)},Snake.prototype.getNextPos=function(front){var p=this.head.instance.getPosition();switch(front){case"down":return lib$6.v2(p.x,p.y-this.step);case"left":return lib$6.v2(p.x-this.step,p.y);case"right":return lib$6.v2(p.x+this.step,p.y);case"up":return lib$6.v2(p.x,p.y+this.step)}},Snake=__decorate([lib$6.Injectable(_Symbol.InjSym.Snake),__param(0,lib$6.Inject(_Symbol.InjSym.Node)),__param(1,lib$6.Inject(_Symbol.InjSym.Factory)),__metadata("design:paramtypes",[lib$6.Node,Object])],Snake)}();exports.Snake=Snake});unwrapExports(Snake_1);Snake_1.Snake;var Scene_1=createCommonjsModule(function(module,exports){var __decorate=commonjsGlobal&&commonjsGlobal.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(c<3?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r},__metadata=commonjsGlobal&&commonjsGlobal.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)},__param=commonjsGlobal&&commonjsGlobal.__param||function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};Object.defineProperty(exports,"__esModule",{value:!0});var Scene=function(){function Scene(snake,node,TouchFront,Factory,Rander){var _this=this;this.snake=snake,this.node=node,this.TouchFront=TouchFront,this.Factory=Factory,this.Rander=Rander,this.children=[],this.currentFront="right";var MaxHeight=props.config.MaxHeight,MaxWidth=props.config.MaxWidth,background=props.config.colors.background;this.currentFood=this.createFood(),this.TouchFront.onLeft(function(){return _this.currentFront="left"}).onRight(function(){return _this.currentFront="right"}).onUp(function(){return _this.currentFront="down"}).onDown(function(){return _this.currentFront="up"}).listen(),this.node.setSize(MaxHeight,MaxWidth).setColor(background),this.score=new lib$6.Label(String(this.snake.length)).setPosition(100,0);var scoreLabel=new lib$6.Label("score:");this.children.push(this.snake,this.Factory.getInstance().createComponent(this.score),this.Factory.getInstance().createComponent(scoreLabel))}return Scene.prototype.createFood=function(){var bodySize=props.config.bodySize,food=new lib$6.Node(bodySize,bodySize).setPosition(this.Rander.getRandPos(props.config)).setColor(this.Rander.getRandColor());return this.children.push(this.Factory.getInstance().createComponent(food)),food},Scene.prototype.update=function(){this.snake.move(this.currentFront).meet(this.currentFood.getPosition())&&(this.snake.eat(this.currentFood),this.score.text=String(Number(this.score.text)+1),this.currentFood=this.createFood())},Scene=__decorate([lib$6.Bootstrap,lib$6.Injectable(_Symbol.InjSym.Scene),__param(0,lib$6.Inject(_Symbol.InjSym.Snake)),__param(1,lib$6.Inject(_Symbol.InjSym.Node)),__param(2,lib$6.Inject(_Symbol.InjSym.TouchFront)),__param(3,lib$6.Inject(_Symbol.InjSym.Factory)),__param(4,lib$6.Inject(_Symbol.InjSym.Rander)),__metadata("design:paramtypes",[Object,lib$6.Node,lib.TouchFront,Object,Object])],Scene)}();exports.Scene=Scene});unwrapExports(Scene_1);Scene_1.Scene;var Factory_1=createCommonjsModule(function(module,exports){var __decorate=commonjsGlobal&&commonjsGlobal.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(c<3?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r},__metadata=commonjsGlobal&&commonjsGlobal.__metadata||function(k,v){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,v)};Object.defineProperty(exports,"__esModule",{value:!0});var Factory=function(){function Factory(){}var Factory_1;return(Factory_1=Factory).getInstance=function(){return this.instance||(this.instance=new Factory_1)},Factory.prototype.createComponent=function(node){return{node:node}},Factory.prototype.createListNode=function(instance){return new lib$2.List(instance)},Factory=Factory_1=__decorate([lib$6.Singleton,lib$6.Injectable(_Symbol.InjSym.Factory),__metadata("design:paramtypes",[])],Factory)}();exports.Factory=Factory});unwrapExports(Factory_1);Factory_1.Factory;var rand=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.random=function(max,min){return void 0===min&&(min=0),min+(max-min)*Math.random()},exports.rand=function(max,min){return void 0===min&&(min=0),parseInt(String(exports.random(max,min)))},exports.randVec=function(x,y){return void 0===y&&(y=x),{x:exports.rand(x),y:exports.rand(y)}},exports.uuid=function(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}});unwrapExports(rand);rand.random,rand.rand,rand.randVec,rand.uuid;var lib$7=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),function(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(rand)});unwrapExports(lib$7);var Rander_1=createCommonjsModule(function(module,exports){var __decorate=commonjsGlobal&&commonjsGlobal.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(c<3?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:!0});var Rander=function(){function Rander(){}return Rander.getRandPos=function(_a){var bodySize=_a.bodySize,MaxWidth=_a.MaxWidth,MaxHeight=_a.MaxHeight,stepX=lib$7.rand(MaxWidth/bodySize),stepY=lib$7.rand(MaxHeight/bodySize);return lib$4.v2(bodySize*stepX,bodySize*stepY)},Rander.getRandColor=function(){var sand=lib$7.rand(0,10);return 8<sand?"red":6<sand?"green":4<sand?"black":2<sand?"grey":"yellow"},Rander=__decorate([lib$6.Static,lib$6.Injectable(_Symbol.InjSym.Rander)],Rander)}();exports.Rander=Rander});unwrapExports(Rander_1);Rander_1.Rander;return unwrapExports(createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),lib$6.registerModule(lib.TouchFront),alert("鼠标滑动方向控制移动！准备好了么？"),lib$6.createCanvas(props.config)(Snake_1.Snake,Scene_1.Scene,Factory_1.Factory,Rander_1.Rander,lib.TouchFront)}))}();